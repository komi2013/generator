<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title><?=$news?>Contact</title>
    <script src="/public/third/jquery-2.1.1.min.js"></script>
    <script src="/public/third/jquery.cookie.js"></script>
    <meta name="viewport" content="width=device-width, user-scalable=no" >
	</head>
<body>

<style type="text/css">
body {
  margin: 0 auto;
  font-size: 18pt;
}
</style>

<table cellspacing="0" id="header">
  <td id="left"><img src="/public/img/icon/menu.png" height="40"></td>
  <td id="center"><?=$news?>Contact</td>
</table>
<table id="drawer" cellspacing="1" boroder="0">
  <tr><td><a href="/generate/" style="text-decoration:none;">Generate</a></td></tr>
  <tr><td><a href="/myquestion/" style="text-decoration:none;">My Quiz</a></td></tr>
  <tr><td><a href="/myanswer/" style="text-decoration:none;">My Answer</a></td></tr>
  <tr><td><a href="/other/" style="text-decoration:none;">Other</a></td></tr>
  <tr><td><a href="/follow/" style="text-decoration:none;">Follow</a></td></tr>
  <tr><td id="news"><a href="/news/" style="text-decoration:none;"><?=$news?>News</a></td></tr>
  <tr><td><a href="/contact/" style="text-decoration:none;">Contact</a></td></tr>
  <tr><td><a href="/rule/" style="text-decoration:none;">Rule</a></td></tr>
</table>

<script>
var drawerIsOpen = false;
$(function(){
  var width = $(window).width();
  drawerIsOpen = false;
  $('#left').click(function(){
    if(drawerIsOpen){
      $('#drawer').css({
        'left': -width
      });
      drawerIsOpen = false;
    }else{
      $('#drawer').css({
        'left': 0
      });
      drawerIsOpen = true;
    }
  });
  $('#drawer').css({
    'width': width * 80/100,
    'overflow': 'scroll',
    'display': 'block',
    'position': 'absolute',
    'z-index': 10,
    'margin': 0,
    'top': 50,
    'background-color': 'white',
    'left': -width
  });
  $('#drawer td').css({
    'width': width * 80/100,
    'height': 50,
    'background-color': '#996666'
  });
  $('#header').css({
    'background-color': '#996666',
    'height': 50
  });
  
  $('#left').css({
    'width': $(window).width() / 4,
    'text-align': 'center',
  });
  
  $('#center').css({
    'width': ($(window).width() * 3/4) -2,
    'text-align': 'center'
  });
});

</script>



<script>

if(localStorage.news){
  var news = JSON.parse(localStorage.news);
  if(news[2] == 2){
    getNews();
  }
}else{
  var news = [];
  news[0] = 0;
  getNews();
}

$.get('/newsshow/',{},function(res){
  if(res[0]==1){
    
//       addCel(res[1]);
//     localStorage.answer = JSON.stringify(answer);
    $('#cel').append(res[1].length);

    if(localStorage.news){
      var news = JSON.parse(localStorage.news);
      if(news[0] < 3){
        $('#drawer').css({
          'left': 0
        });
        drawerIsOpen = true;
        var limit = 0;
        while(limit < 3){
          $('#news').fadeOut(1000,function(){
            $(this).css("background-color","yellow");
          }).fadeIn(1000);
          ++limit;
        }
      }
    }else{
      $('#drawer').css({
        'left': 0
      });
      drawerIsOpen = true;
      var limit = 0;
      while(limit < 3){
        $('#news').fadeOut(1000,function(){
          $(this).css("background-color","yellow");
        }).fadeIn(1000);
        ++limit;
      }
      var news = [];
      news[0] = 0;
    }
    news[0] = news[0]+1;
    news[1] = new Date().getDate();
    news[2] = res[1];
    localStorage.news = JSON.stringify(news);
  }else{
//      console.log('no data from API');
  }
}, "json");
function addCel(resData){
  console.log(resData);
  var celImg = '/public/img/icon/no_image.jpg';
  var cellTxt = '';
  while(celNum < addLimit){
    cellId = resData[celNum][0];
    cellTxt = resData[celNum][1];
    if(resData[celNum][2]){
      celImg = resData[celNum][2];
    }
    var append = 
    '<tr><td>'+
    '<a href="/quiz/?q='+cellId+'" style="text-decoration:none;color:black;">'+
    '</a><img src="'+celImg+'" style="width:48px;height:48px;vertical-align:middle;">'+
    '</td><td style="background-color:#e0ffff;height:50px;width:'+celLength+'px;">'+
    '<a href="/quiz/?q='+cellId+'" style="text-decoration:none;color:black;">'+cellTxt+'</a>'+
    '</td></tr>';
    $('#cel').append(append);
    ++celNum;
//     celTop = celTop + 40;
    if(!resData[celNum]){
      return;
    }
  }
}

</script>

</body>
</html>
